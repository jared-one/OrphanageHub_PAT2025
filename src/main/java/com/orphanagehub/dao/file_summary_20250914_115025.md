# DETAILED FILE SELECTION SUMMARY

**Generated:** 2025-09-14 11:50:25
**Directory:** `/home/jared/OrphanageHub_PAT2025/src/main/java/com/orphanagehub/dao`
**Total Files:** 2

---

## Files by Type

### .java (2 files)

- `DonationDAO.java` (10.5 KB)
- `DonationItemDAO.java` (305.0 B)

---

## File Previews

### ðŸ“„ DonationDAO.java

**Size:** 10.5 KB

```java
package com.orphanagehub.dao;

import com.orphanagehub.model.Donation;
import io.vavr.collection.List;
import io.vavr.control.Option;
import io.vavr.control.Try;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.sql.*;
import java.time.LocalDateTime;
import java.util.UUID;

public class DonationDAO {
    private static final Logger logger = LoggerFactory.getLogger(DonationDAO.class);
    
    public Try<Donation> create(Donation donation) {
        return Try.of(() -> {
            String sql = "INSERT INTO TblDonations (DonorID, OrphanageID, RequestID, " +
                       "DonationType, Amount, Currency, ItemDescription, Status, " +
                       "DonationDate, CreatedDate) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS)) {
                
                ps.setInt(1, donation.donorId());
                ps.setInt(2, donation.orphanageId());
                ps.setObject(3, donation.requestId().getOrNull());
                ps.setString(4, donation.donationType());
                ps.setObject(5, donation.amount().getOrNull());
                ps.setString(6, donation.currency());
                ps.setString(7, donation.itemDescription().getOrNull());
                ps.setString(8, donation.status());
                ps.setTimestamp(9, Timestamp.valueOf(donation.donationDate()));
                ps.setTimestamp(10, Timestamp.valueOf(donation.createdDate()));
                
                int affected = ps.executeUpdate();
                if (affected > 0) {
                    try (ResultSet keys = ps.getGeneratedKeys()) {
                        if (keys.next()) {
                            Integer newId = keys.getInt(1);
                            logger.info("Donation created with ID: {}", newId);
                            return withId(donation, newId);
                        }
                    }
                }
                return donation;
            }
        });
    }
    
    public Try<Option<Donation>> findById(Integer id) {
        return Try.of(() -> {
            String sql = "SELECT * FROM TblDonations WHERE DonationID = ?";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql)) {
                ps.setInt(1, id);
                try (ResultSet rs = ps.executeQuery()) {
                    return rs.next() ? Option.of(mapToDonation(rs)) : Option.<Donation>none();
                }
            }
        });
    }
    
    public Try<List<Donation>> findAll() {
        return Try.of(() -> {
            String sql = "SELECT * FROM TblDonations ORDER BY DonationDate DESC";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql);
                 ResultSet rs = ps.executeQuery()) {
                List<Donation> donations = List.empty();
                while (rs.next()) {
                    donations = donations.append(mapToDonation(rs));
                }
                logger.debug("Found {} donations", donations.size());
                return donations;
            }
        });
    }
    
    public Try<List<Donation>> findByDonor(Integer donorId) {
        return Try.of(() -> {
            String sql = "SELECT * FROM TblDonations WHERE DonorID = ? ORDER BY DonationDate DESC";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql)) {
                ps.setInt(1, donorId);
                try (ResultSet rs = ps.executeQuery()) {
                    List<Donation> donations = List.empty();
                    while (rs.next()) {
                        donations = donations.append(mapToDonation(rs));
                    }
                    return donations;
                }
            }
        });
    }
    
    public Try<List<Donation>> findByOrphanage(Integer orphanageId) {
        return Try.of(() -> {
            String sql = "SELECT * FROM TblDonations WHERE OrphanageID = ? ORDER BY DonationDate DESC";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql)) {
                ps.setInt(1, orphanageId);
                try (ResultSet rs = ps.executeQuery()) {
                    List<Donation> donations = List.empty();
                    while (rs.next()) {
                        donations = donations.append(mapToDonation(rs));
                    }
                    return donations;
                }
            }
        });
    }
    
    public Try<Double> getTotalDonations() {
        return Try.of(() -> {
            String sql = "SELECT COALESCE(SUM(Amount), 0) as Total FROM TblDonations " +
                        "WHERE Status = 'Completed' AND DonationType = 'Money'";
            try (Connection conn = DatabaseManager.getConnectio
... (truncated to 5KB)
```

### ðŸ“„ DonationItemDAO.java

**Size:** 305.0 B

```java
package com.orphanagehub.dao;

import com.orphanagehub.model.DonationItem;
import io.vavr.control.Try;
import io.vavr.collection.List;

public class DonationItemDAO {
    
    public Try<List<DonationItem>> findByDonation(Integer donationId) {
        return Try.of(() -> List.empty());
    }
}
```


---

## Statistics

- **Total Files:** 2
- **Total Size:** 10.8 KB
- **File Types:** 1
- **Average Size:** 5.4 KB