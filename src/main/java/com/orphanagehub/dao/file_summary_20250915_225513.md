# CONFIGURATION QUERY OUTPUT
Generated: 2025-09-15 22:55:13
Directory: /home/jared/OrphanageHub_PAT2025/src/main/java/com/orphanagehub/dao
================================================================================

------------------------------------------------------------
File: NotificationDAO.java
Size: 647 bytes
```java
package com.orphanagehub.dao;

import com.orphanagehub.model.Notification;
import io.vavr.control.Try;
import io.vavr.control.Option;
import io.vavr.collection.List;
import java.sql.*;

public class NotificationDAO {
    
    public Try<Void> create(Notification notification) {
        return Try.of(() -> {
            // Stub implementation
            return null;
        });
    }
    
    public Try<Option<Notification>> findById(Integer id) {
        return Try.of(() -> Option.none());
    }
    
    public Try<List<Notification>> findByUserId(Integer userId) {
        return Try.of(() -> List.empty());
    }
}
```

------------------------------------------------------------
File: DonationItemDAO.java
Size: 305 bytes
```java
package com.orphanagehub.dao;

import com.orphanagehub.model.DonationItem;
import io.vavr.control.Try;
import io.vavr.collection.List;

public class DonationItemDAO {
    
    public Try<List<DonationItem>> findByDonation(Integer donationId) {
        return Try.of(() -> List.empty());
    }
}
```

------------------------------------------------------------
File: ResourceRequestDAO.java
Size: 6599 bytes
```java
package com.orphanagehub.dao;

import com.orphanagehub.model.ResourceRequest;
import io.vavr.collection.List;
import io.vavr.control.Option;
import io.vavr.control.Try;
import java.sql.*;
import java.time.LocalDateTime;

public class ResourceRequestDAO {
    
    public Try<ResourceRequest> create(ResourceRequest request) {
        return Try.of(() -> {
            String sql = "INSERT INTO TblResourceRequests (OrphanageID, ResourceType, " +
                        "ResourceDescription, Quantity, Unit, UrgencyLevel, RequestDate, " +
                        "NeededByDate, Status, CreatedBy) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS)) {
                
                ps.setInt(1, request.orphanageId());
                ps.setString(2, request.resourceType());
                ps.setString(3, request.resourceDescription());
                ps.setDouble(4, request.quantity());
                ps.setString(5, request.unit().getOrNull());
                ps.setString(6, request.urgencyLevel());
                ps.setTimestamp(7, Timestamp.valueOf(request.requestDate()));
                ps.setObject(8, request.neededByDate().map(java.sql.Date::valueOf).getOrNull());
                ps.setString(9, request.status());
                ps.setInt(10, request.createdBy());
                
                ps.executeUpdate();
                
                try (ResultSet keys = ps.getGeneratedKeys()) {
                    if (keys.next()) {
                        return findById(keys.getInt(1)).get().get();
                    }
                }
                return request;
            }
        });
    }
    
    public Try<Option<ResourceRequest>> findById(Integer requestId) {
        return Try.of(() -> {
            String sql = "SELECT * FROM TblResourceRequests WHERE RequestID = ?";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql)) {
                ps.setInt(1, requestId);
                ResultSet rs = ps.executeQuery();
                return rs.next() ? Option.of(mapToResourceRequest(rs)) : Option.<ResourceRequest>none();
            }
        });
    }
    
    public Try<List<ResourceRequest>> findByOrphanageId(Integer orphanageId) {
        return Try.of(() -> {
            String sql = "SELECT * FROM TblResourceRequests WHERE OrphanageID = ?";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql)) {
                ps.setInt(1, orphanageId);
                ResultSet rs = ps.executeQuery();
                List<ResourceRequest> requests = List.empty();
                while (rs.next()) {
                    requests = requests.append(mapToResourceRequest(rs));
                }
                return requests;
            }
        });
    }
    
    public Try<List<ResourceRequest>> findOpenRequests() {
        return Try.of(() -> {
            String sql = "SELECT * FROM TblResourceRequests WHERE Status = 'Open' ORDER BY UrgencyLevel, RequestDate";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql);
                 ResultSet rs = ps.executeQuery()) {
                List<ResourceRequest> requests = List.empty();
                while (rs.next()) {
                    requests = requests.append(mapToResourceRequest(rs));
                }
                return requests;
            }
        });
    }
    
    public Try<List<ResourceRequest>> findUrgentRequests() {
        return Try.of(() -> {
            String sql = "SELECT * FROM TblResourceRequests WHERE Status = 'Open' " +
                        "AND UrgencyLevel IN ('Critical', 'High') ORDER BY RequestDate";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql);
                 ResultSet rs = ps.executeQuery()) {
                List<ResourceRequest> requests = List.empty();
                while (rs.next()) {
                    requests = requests.append(mapToResourceRequest(rs));
                }
                return requests;
            }
        });
    }
    
    public Try<Void> update(ResourceRequest request) {
        return Try.run(() -> {
            String sql = "UPDATE TblResourceRequests SET ResourceDescription=?, Quantity=?, " +
                        "UrgencyLevel=?, Status=?, ModifiedDate=?, ModifiedBy=? WHERE RequestID=?";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql)) {
                ps.setString(1, request.resourceDescription());
                ps.setDouble(2, request.quantity());
                ps.setString(3, request.urgencyLevel());
                ps.setString(4, request.status());
                ps.setTimesta
*(truncated)*
```

------------------------------------------------------------
File: DatabaseManager.java
Size: 10332 bytes
```java
package com.orphanagehub.dao;

import com.zaxxer.hikari.HikariConfig;
import com.zaxxer.hikari.HikariDataSource;
import io.vavr.control.Try;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import javax.sql.DataSource;
import java.io.IOException;
import java.io.InputStream;
import java.sql.Connection;
import java.sql.DatabaseMetaData;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Properties;
import java.util.concurrent.atomic.AtomicBoolean;

/**
 * Manages database connections using HikariCP pooling with automatic schema management.
 * Provides efficient, thread-safe connections with database initialization.
 */
public class DatabaseManager {
    private static final Logger logger = LoggerFactory.getLogger(DatabaseManager.class);
    private static final String CONFIG_FILE = "/app.properties";  // Align with resources
    private static final String DEFAULT_DB_PATH = "db/OrphanageHub.sqlite";  // CHANGED: .accdb to .sqlite
    private static final AtomicBoolean initialized = new AtomicBoolean(false);
    
    private static volatile HikariDataSource dataSource;
    
    static {
        initializeDataSource();
    }
    
    /**
     * Initialize the HikariCP data source with proper configuration
     */
    private static void initializeDataSource() {
        Try.of(() -> {
            HikariConfig config = new HikariConfig();
            
            // Load configuration from properties file, with fallback to defaults
            Properties props = loadDatabaseProperties();
            
            // CHANGED: Configure HikariCP for SQLite instead of UCanAccess
            String dbPath = props.getProperty("db.url", "jdbc:sqlite:" + DEFAULT_DB_PATH);
            config.setJdbcUrl(dbPath);  // CHANGED: Removed UCanAccess-specific parameters
            
            // CHANGED: Load SQLite driver instead of UCanAccess
            try {
                Class.forName("org.sqlite.JDBC");
                config.setDriverClassName("org.sqlite.JDBC");
            } catch (ClassNotFoundException e) {
                throw new RuntimeException("SQLite JDBC driver not found in classpath", e);
            }
            
            // Connection pool settings optimized for small desktop app
            config.setMaximumPoolSize(Integer.parseInt(props.getProperty("project.build.pool.maxSize", "10")));
            config.setMinimumIdle(Integer.parseInt(props.getProperty("project.build.pool.minIdle", "2")));
            config.setConnectionTimeout(Long.parseLong(props.getProperty("project.build.pool.connectionTimeout", "30000")));
            config.setIdleTimeout(Long.parseLong(props.getProperty("project.build.pool.idleTimeout", "600000")));
            config.setMaxLifetime(Long.parseLong(props.getProperty("project.build.pool.maxLifetime", "1800000")));
            
            // CHANGED: Connection test query for SQLite - Use SELECT 1 instead of VALUES(1)
            config.setConnectionTestQuery("SELECT 1");
            config.setPoolName("OrphanageHubPool");
            
            // Additional optimizations for desktop use
            config.setAutoCommit(true);
            config.setReadOnly(false);
            config.setLeakDetectionThreshold(60000);
            
            dataSource = new HikariDataSource(config);
            logger.info("HikariCP connection pool initialized successfully");
            
            // Initialize database schema after pool creation
            initializeDatabase();
            return null;
        }).onFailure(error -> {
            logger.error("Failed to initialize database connection pool", error);
            throw new RuntimeException("Database initialization failed: " + error.getMessage(), error);
        });
    }
    
    /**
     * Load database properties from configuration file
     */
    private static Properties loadDatabaseProperties() {
        Properties props = new Properties();
        
        Try.of(() -> {
            try (InputStream is = DatabaseManager.class.getResourceAsStream(CONFIG_FILE)) {
                if (is != null) {
                    props.load(is);
                    logger.info("Database configuration loaded from {}", CONFIG_FILE);
                } else {
                    logger.warn("Configuration file {} not found, using defaults", CONFIG_FILE);
                    setDefaultProperties(props);
                }
            }
            return props;
        }).onFailure(error -> {
            logger.warn("Error loading database configuration, using defaults", error);
            setDefaultProperties(props);
        });
        
        return props;
    }
    
    /**
     * Set default database properties
     */
    private static void setDefaultProperties(Properties props) {
        props.setProperty("db.url", "jdbc:sqlite:" + DEFAULT_DB_PATH);  // CHANGED: jdbc:ucanaccess:// to jdbc:sqlite:
        props.setProperty("project.build.pool.maxSize", "10");
        props.setProperty("project.build.pool.minIdle", "2");
        props.setProperty("project.build.pool.connectionTimeout"
*(truncated)*
```

------------------------------------------------------------
File: VolunteerApplicationDAO.java
Size: 608 bytes
```java
package com.orphanagehub.dao;

import com.orphanagehub.model.VolunteerApplication;
import io.vavr.control.Try;
import io.vavr.control.Option;
import io.vavr.collection.List;

public class VolunteerApplicationDAO {
    
    public Try<Void> create(VolunteerApplication application) {
        return Try.of(() -> null);
    }
    
    public Try<Option<VolunteerApplication>> findById(Integer id) {
        return Try.of(() -> Option.none());
    }
    
    public Try<List<VolunteerApplication>> findByOpportunity(Integer opportunityId) {
        return Try.of(() -> List.empty());
    }
}
```

------------------------------------------------------------
File: AuditLogDAO.java
Size: 441 bytes
```java
package com.orphanagehub.dao;

import com.orphanagehub.model.AuditLog;
import io.vavr.control.Try;
import io.vavr.control.Option;
import io.vavr.collection.List;

public class AuditLogDAO {
    
    public Try<Void> log(String action, Integer userId, String details) {
        return Try.of(() -> null);
    }
    
    public Try<List<AuditLog>> findByUser(Integer userId) {
        return Try.of(() -> List.empty());
    }
}
```

------------------------------------------------------------
File: UserDAO.java
Size: 8695 bytes
```java
package com.orphanagehub.dao;

import com.orphanagehub.model.User;
import io.vavr.collection.List;
import io.vavr.control.Option;
import io.vavr.control.Try;
import io.vavr.Tuple;
import io.vavr.Tuple2;
import java.sql.*;
import java.time.LocalDateTime;

public class UserDAO {
    
    public Try<User> create(User user) {
        return Try.of(() -> {
            String sql = "INSERT INTO TblUsers (Username, PasswordHash, Email, UserRole, " +
                        "DateRegistered, FullName, AccountStatus, EmailVerified) " +
                        "VALUES (?, ?, ?, ?, ?, ?, ?, ?)";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS)) {
                
                ps.setString(1, user.username());
                ps.setString(2, user.passwordHash());
                ps.setString(3, user.email());
                ps.setString(4, user.userRole());
                ps.setTimestamp(5, Timestamp.valueOf(user.dateRegistered()));
                ps.setString(6, user.fullName().getOrNull());
                ps.setString(7, user.accountStatus());
                ps.setBoolean(8, user.emailVerified());
                
                ps.executeUpdate();
                
                try (ResultSet keys = ps.getGeneratedKeys()) {
                    if (keys.next()) {
                        return findById(keys.getInt(1)).get().get();
                    }
                }
                return user;
            }
        });
    }
    
    public Try<Option<User>> findById(Integer userId) {
        return Try.of(() -> {
            String sql = "SELECT * FROM TblUsers WHERE UserID = ?";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql)) {
                ps.setInt(1, userId);
                try (ResultSet rs = ps.executeQuery()) {
                    return rs.next() ? Option.of(mapToUser(rs)) : Option.<User>none();
                }
            }
        });
    }
    
    public Try<Option<User>> findByUsername(String username) {
        return Try.of(() -> {
            String sql = "SELECT * FROM TblUsers WHERE Username = ?";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql)) {
                ps.setString(1, username);
                try (ResultSet rs = ps.executeQuery()) {
                    return rs.next() ? Option.of(mapToUser(rs)) : Option.<User>none();
                }
            }
        });
    }
    
    public Try<List<User>> findAll() {
        return Try.of(() -> {
            String sql = "SELECT * FROM TblUsers ORDER BY Username";
            try (Connection conn = DatabaseManager.getConnection().get();
                 Statement stmt = conn.createStatement();
                 ResultSet rs = stmt.executeQuery(sql)) {
                List<User> users = List.empty();
                while (rs.next()) {
                    users = users.append(mapToUser(rs));
                }
                return users;
            }
        });
    }
    
    public Try<List<User>> findAllActive() {
        return Try.of(() -> {
            String sql = "SELECT * FROM TblUsers WHERE AccountStatus = 'Active' ORDER BY Username";
            try (Connection conn = DatabaseManager.getConnection().get();
                 Statement stmt = conn.createStatement();
                 ResultSet rs = stmt.executeQuery(sql)) {
                List<User> users = List.empty();
                while (rs.next()) {
                    users = users.append(mapToUser(rs));
                }
                return users;
            }
        });
    }
    
    public Try<List<User>> findByRole(String role) {
        return Try.of(() -> {
            String sql = "SELECT * FROM TblUsers WHERE UserRole = ? ORDER BY Username";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql)) {
                ps.setString(1, role);
                try (ResultSet rs = ps.executeQuery()) {
                    List<User> users = List.empty();
                    while (rs.next()) {
                        users = users.append(mapToUser(rs));
                    }
                    return users;
                }
            }
        });
    }
    
    public Try<Void> update(User user) {
        return Try.run(() -> {
            String sql = "UPDATE TblUsers SET Username = ?, Email = ?, UserRole = ?, " +
                        "FullName = ?, AccountStatus = ?, ModifiedDate = ? WHERE UserID = ?";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql)) {
                ps.setString(1, user.username());
                ps.setString(2, user.email());
                ps.setString(3, user.userRole());
                ps.setString(4, user.fullName().getOrNull());
                ps.se
*(truncated)*
```

------------------------------------------------------------
File: VolunteerOpportunityDAO.java
Size: 5807 bytes
```java
package com.orphanagehub.dao;

import com.orphanagehub.model.VolunteerOpportunity;
import io.vavr.collection.List;
import io.vavr.control.Option;
import io.vavr.control.Try;
import java.sql.*;
import java.util.UUID;

public class VolunteerOpportunityDAO {
    
    public Try<Void> create(VolunteerOpportunity opportunity) {
        return DatabaseManager.getConnection()
            .flatMap(conn -> Try.withResources(() -> conn)
                .of(connection -> {
                    String sql = "INSERT INTO TblVolunteerOpportunities (OpportunityID, OrphanageID, SkillRequired, Location, TimeCommitment, Status) VALUES (?, ?, ?, ?, ?, ?)";
                    try (PreparedStatement ps = connection.prepareStatement(sql)) {
                        ps.setString(1, UUID.randomUUID().toString().substring(0, 10));
                        ps.setString(2, opportunity.orphanageId());
                        ps.setString(3, opportunity.skillRequired());
                        ps.setString(4, opportunity.location());
                        ps.setString(5, opportunity.timeCommitment().getOrNull());
                        ps.setString(6, opportunity.status());
                        ps.executeUpdate();
                    }
                    return null;
                }));
    }
    
    public Try<Option<VolunteerOpportunity>> findById(String id) {
        return DatabaseManager.getConnection()
            .flatMap(conn -> Try.withResources(() -> conn)
                .of(connection -> {
                    String sql = "SELECT * FROM TblVolunteerOpportunities WHERE OpportunityID = ?";
                    try (PreparedStatement ps = connection.prepareStatement(sql)) {
                        ps.setString(1, id);
                        ResultSet rs = ps.executeQuery();
                        return rs.next() ? Option.of(mapToVolunteerOpportunity(rs)) : Option.<VolunteerOpportunity>none();
                    }
                }));
    }
    
    public Try<List<VolunteerOpportunity>> findByOrphanageId(String orphanageId) {
        return DatabaseManager.getConnection()
            .flatMap(conn -> Try.withResources(() -> conn)
                .of(connection -> {
                    String sql = "SELECT * FROM TblVolunteerOpportunities WHERE OrphanageID = ?";
                    List<VolunteerOpportunity> opportunities = List.empty();
                    try (PreparedStatement ps = connection.prepareStatement(sql)) {
                        ps.setString(1, orphanageId);
                        ResultSet rs = ps.executeQuery();
                        while (rs.next()) {
                            opportunities = opportunities.append(mapToVolunteerOpportunity(rs));
                        }
                    }
                    return opportunities;
                }));
    }
    
    public Try<List<VolunteerOpportunity>> findAll() {
        return DatabaseManager.getConnection()
            .flatMap(conn -> Try.withResources(() -> conn)
                .of(connection -> {
                    String sql = "SELECT * FROM TblVolunteerOpportunities";
                    List<VolunteerOpportunity> opportunities = List.empty();
                    try (PreparedStatement ps = connection.prepareStatement(sql)) {
                        ResultSet rs = ps.executeQuery();
                        while (rs.next()) {
                            opportunities = opportunities.append(mapToVolunteerOpportunity(rs));
                        }
                    }
                    return opportunities;
                }));
    }
    
    public Try<Void> update(VolunteerOpportunity opportunity) {
        return Option.of(opportunity.opportunityId())
                .toTry(() -> new IllegalArgumentException("Opportunity ID required for update"))
                .flatMap(id -> DatabaseManager.getConnection()
                    .flatMap(conn -> Try.withResources(() -> conn)
                        .of(connection -> {
                            String sql = "UPDATE TblVolunteerOpportunities SET OrphanageID = ?, SkillRequired = ?, Location = ?, TimeCommitment = ?, Status = ? WHERE OpportunityID = ?";
                            try (PreparedStatement ps = connection.prepareStatement(sql)) {
                                ps.setString(1, opportunity.orphanageId());
                                ps.setString(2, opportunity.skillRequired());
                                ps.setString(3, opportunity.location());
                                ps.setString(4, opportunity.timeCommitment().getOrNull());
                                ps.setString(5, opportunity.status());
                                ps.setString(6, id);
                                ps.executeUpdate();
                            }
                            return null;
                        })));
    }
    
    public Try<Void> delete(String id) {
        return DatabaseManager.getConnection()
            .flatMap(conn -> Try.withResources(() -> conn)
                .of(connection -> {
                    String sql = "DELETE FROM TblVolunteerOpportunities WHERE Op
*(truncated)*
```

------------------------------------------------------------
File: DonationDAO.java
Size: 10749 bytes
```java
package com.orphanagehub.dao;

import com.orphanagehub.model.Donation;
import io.vavr.collection.List;
import io.vavr.control.Option;
import io.vavr.control.Try;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.sql.*;
import java.time.LocalDateTime;
import java.util.UUID;

public class DonationDAO {
    private static final Logger logger = LoggerFactory.getLogger(DonationDAO.class);
    
    public Try<Donation> create(Donation donation) {
        return Try.of(() -> {
            String sql = "INSERT INTO TblDonations (DonorID, OrphanageID, RequestID, " +
                       "DonationType, Amount, Currency, ItemDescription, Status, " +
                       "DonationDate, CreatedDate) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS)) {
                
                ps.setInt(1, donation.donorId());
                ps.setInt(2, donation.orphanageId());
                ps.setObject(3, donation.requestId().getOrNull());
                ps.setString(4, donation.donationType());
                ps.setObject(5, donation.amount().getOrNull());
                ps.setString(6, donation.currency());
                ps.setString(7, donation.itemDescription().getOrNull());
                ps.setString(8, donation.status());
                ps.setTimestamp(9, Timestamp.valueOf(donation.donationDate()));
                ps.setTimestamp(10, Timestamp.valueOf(donation.createdDate()));
                
                int affected = ps.executeUpdate();
                if (affected > 0) {
                    try (ResultSet keys = ps.getGeneratedKeys()) {
                        if (keys.next()) {
                            Integer newId = keys.getInt(1);
                            logger.info("Donation created with ID: {}", newId);
                            return withId(donation, newId);
                        }
                    }
                }
                return donation;
            }
        });
    }
    
    public Try<Option<Donation>> findById(Integer id) {
        return Try.of(() -> {
            String sql = "SELECT * FROM TblDonations WHERE DonationID = ?";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql)) {
                ps.setInt(1, id);
                try (ResultSet rs = ps.executeQuery()) {
                    return rs.next() ? Option.of(mapToDonation(rs)) : Option.<Donation>none();
                }
            }
        });
    }
    
    public Try<List<Donation>> findAll() {
        return Try.of(() -> {
            String sql = "SELECT * FROM TblDonations ORDER BY DonationDate DESC";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql);
                 ResultSet rs = ps.executeQuery()) {
                List<Donation> donations = List.empty();
                while (rs.next()) {
                    donations = donations.append(mapToDonation(rs));
                }
                logger.debug("Found {} donations", donations.size());
                return donations;
            }
        });
    }
    
    public Try<List<Donation>> findByDonor(Integer donorId) {
        return Try.of(() -> {
            String sql = "SELECT * FROM TblDonations WHERE DonorID = ? ORDER BY DonationDate DESC";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql)) {
                ps.setInt(1, donorId);
                try (ResultSet rs = ps.executeQuery()) {
                    List<Donation> donations = List.empty();
                    while (rs.next()) {
                        donations = donations.append(mapToDonation(rs));
                    }
                    return donations;
                }
            }
        });
    }
    
    public Try<List<Donation>> findByOrphanage(Integer orphanageId) {
        return Try.of(() -> {
            String sql = "SELECT * FROM TblDonations WHERE OrphanageID = ? ORDER BY DonationDate DESC";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql)) {
                ps.setInt(1, orphanageId);
                try (ResultSet rs = ps.executeQuery()) {
                    List<Donation> donations = List.empty();
                    while (rs.next()) {
                        donations = donations.append(mapToDonation(rs));
                    }
                    return donations;
                }
            }
        });
    }
    
    public Try<Double> getTotalDonations() {
        return Try.of(() -> {
            String sql = "SELECT COALESCE(SUM(Amount), 0) as Total FROM TblDonations " +
                        "WHERE Status = 'Completed' AND DonationType = 'Money'";
            try (Connection conn = DatabaseManager.getConnectio
*(truncated)*
```

------------------------------------------------------------
File: OrphanageDAO.java
Size: 6726 bytes
```java
package com.orphanagehub.dao;

import com.orphanagehub.model.Orphanage;
import io.vavr.collection.List;
import io.vavr.control.Option;
import io.vavr.control.Try;
import java.sql.*;
import java.time.LocalDate;
import java.time.LocalDateTime;

public class OrphanageDAO {
    
    public Try<Orphanage> save(Orphanage orphanage) {
        return Try.of(() -> {
            String sql = "INSERT INTO TblOrphanages (OrphanageName, Address, City, Province, " +
                        "ContactPerson, ContactEmail, ContactPhone, UserID, VerificationStatus, " +
                        "DateRegistered, Status) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS)) {
                
                ps.setString(1, orphanage.orphanageName());
                ps.setString(2, orphanage.address());
                ps.setString(3, orphanage.city());
                ps.setString(4, orphanage.province());
                ps.setString(5, orphanage.contactPerson());
                ps.setString(6, orphanage.contactEmail());
                ps.setString(7, orphanage.contactPhone());
                ps.setInt(8, orphanage.userId());
                ps.setString(9, orphanage.verificationStatus());
                ps.setTimestamp(10, Timestamp.valueOf(orphanage.dateRegistered()));
                ps.setString(11, orphanage.status());
                
                ps.executeUpdate();
                
                try (ResultSet keys = ps.getGeneratedKeys()) {
                    if (keys.next()) {
                        return findById(keys.getInt(1)).get().get();
                    }
                }
                return orphanage;
            }
        });
    }
    
    public Try<Option<Orphanage>> findById(Integer id) {
        return Try.of(() -> {
            String sql = "SELECT * FROM TblOrphanages WHERE OrphanageID = ?";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql)) {
                ps.setInt(1, id);
                try (ResultSet rs = ps.executeQuery()) {
                    return rs.next() ? Option.of(mapRowToOrphanage(rs)) : Option.<Orphanage>none();
                }
            }
        });
    }
    
    public Try<List<Orphanage>> findByVerificationStatus(String status) {
        return Try.of(() -> {
            String sql = "SELECT * FROM TblOrphanages WHERE VerificationStatus = ?";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql)) {
                ps.setString(1, status);
                try (ResultSet rs = ps.executeQuery()) {
                    List<Orphanage> orphanages = List.empty();
                    while (rs.next()) {
                        orphanages = orphanages.append(mapRowToOrphanage(rs));
                    }
                    return orphanages;
                }
            }
        });
    }
    
    public Try<List<Orphanage>> findAllVerified() {
        return findByVerificationStatus("Verified");
    }
    
    public Try<Void> update(Orphanage orphanage) {
        return Try.run(() -> {
            String sql = "UPDATE TblOrphanages SET OrphanageName = ?, Address = ?, City = ?, " +
                        "Province = ?, ContactPerson = ?, ContactEmail = ?, ContactPhone = ?, " +
                        "VerificationStatus = ?, ModifiedDate = ? WHERE OrphanageID = ?";
            try (Connection conn = DatabaseManager.getConnection().get();
                 PreparedStatement ps = conn.prepareStatement(sql)) {
                ps.setString(1, orphanage.orphanageName());
                ps.setString(2, orphanage.address());
                ps.setString(3, orphanage.city());
                ps.setString(4, orphanage.province());
                ps.setString(5, orphanage.contactPerson());
                ps.setString(6, orphanage.contactEmail());
                ps.setString(7, orphanage.contactPhone());
                ps.setString(8, orphanage.verificationStatus());
                ps.setTimestamp(9, Timestamp.valueOf(LocalDateTime.now()));
                ps.setInt(10, orphanage.orphanageId());
                ps.executeUpdate();
            }
        });
    }
    
    private Orphanage mapRowToOrphanage(ResultSet rs) throws SQLException {
        return new Orphanage(
            rs.getObject("OrphanageID", Integer.class),
            rs.getString("OrphanageName"),
            Option.of(rs.getString("RegistrationNumber")),
            Option.of(rs.getString("TaxNumber")),
            rs.getString("Address"),
            rs.getString("City"),
            rs.getString("Province"),
            Option.of(rs.getString("PostalCode")),
            rs.getString("ContactPerson"),
            rs.getString("ContactEmail"),
            rs.getString("ContactPhone"),
            Option.of(rs.getString("AlternatePhone")),
            Option.of(rs.getString("Web
*(truncated)*
```

================================================================================
Total: 10 files